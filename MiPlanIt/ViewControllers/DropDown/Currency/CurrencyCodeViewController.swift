//
//  CurrencyCodeViewController.swift
//  MiPlanIt
//
//  Created by Aneesh Asokan on 20/01/21.
//  Copyright © 2021 Arun. All rights reserved.
//

import UIKit
protocol CurrencyCodeViewControllerDelegate: class {
    func currencyCodeViewController(_ controller: CurrencyCodeViewController, selectedOption: String)
}

class CurrencyCodeViewController: UIViewController {
    weak var delegate: CurrencyCodeViewControllerDelegate?
    @IBOutlet weak var labelDopDownTitle: UILabel!
    @IBOutlet weak var tableViewDropDownOptions: UITableView!
    @IBOutlet weak var buttonCancel: UIButton!
    var itemSelectionDropDown: [String:String]?
    var dropDownItems: [[String:String]] = [["code":"ADP","name":"Andorran Peseta"],["code":"AED","name":"United Arab Emirates Dirham"],["code":"AFA","name":"Afghan Afghani (1927-2002)"],["code":"AFN","name":"Afghan Afghani"],["code":"ALK","name":"Albanian Lek (1946-1965)"],["code":"ALL","name":"Albanian Lek"],["code":"AMD","name":"Armenian Dram"],["code":"ANG","name":"Netherlands Antillean Guilder"],["code":"AOA","name":"Angolan Kwanza"],["code":"AOK","name":"Angolan Kwanza (1977-1991)"],["code":"AON","name":"Angolan New Kwanza (1990-2000)"],["code":"AOR","name":"Angolan Readjusted Kwanza (1995-1999)"],["code":"ARA","name":"Argentine Austral"],["code":"ARL","name":"Argentine Peso Ley (1970-1983)"],["code":"ARM","name":"Argentine Peso (1881-1970)"],["code":"ARP","name":"Argentine Peso (1983-1985)"],["code":"ARS","name":"Argentine Peso"],["code":"ATS","name":"Austrian Schilling"],["code":"AUD","name":"Australian Dollar"],["code":"AWG","name":"Aruban Florin"],["code":"AZM","name":"Azerbaijani Manat (1993-2006)"],["code":"AZN","name":"Azerbaijani Manat"],["code":"BAD","name":"Bosnia-Herzegovina Dinar (1992-1994)"],["code":"BAM","name":"Bosnia-Herzegovina Convertible Mark"],["code":"BAN","name":"Bosnia-Herzegovina New Dinar (1994-1997)"],["code":"BBD","name":"Barbadian Dollar"],["code":"BDT","name":"Bangladeshi Taka"],["code":"BEC","name":"Belgian Franc (convertible)"],["code":"BEF","name":"Belgian Franc"],["code":"BEL","name":"Belgian Franc (financial)"],["code":"BGL","name":"Bulgarian Hard Lev"],["code":"BGM","name":"Bulgarian Socialist Lev"],["code":"BGN","name":"Bulgarian Lev"],["code":"BGO","name":"Bulgarian Lev (1879-1952)"],["code":"BHD","name":"Bahraini Dinar"],["code":"BIF","name":"Burundian Franc"],["code":"BMD","name":"Bermudan Dollar"],["code":"BND","name":"Brunei Dollar"],["code":"BOB","name":"Bolivian Boliviano"],["code":"BOL","name":"Bolivian Boliviano (1863-1963)"],["code":"BOP","name":"Bolivian Peso"],["code":"BOV","name":"Bolivian Mvdol"],["code":"BRB","name":"Brazilian New Cruzeiro (1967-1986)"],["code":"BRC","name":"Brazilian Cruzado (1986-1989)"],["code":"BRE","name":"Brazilian Cruzeiro (1990-1993)"],["code":"BRL","name":"Brazilian Real"],["code":"BRN","name":"Brazilian New Cruzado (1989-1990)"],["code":"BRR","name":"Brazilian Cruzeiro (1993-1994)"],["code":"BRZ","name":"Brazilian Cruzeiro (1942-1967)"],["code":"BSD","name":"Bahamian Dollar"],["code":"BTN","name":"Bhutanese Ngultrum"],["code":"BUK","name":"Burmese Kyat"],["code":"BWP","name":"Botswanan Pula"],["code":"BYB","name":"Belarusian New Ruble (1994-1999)"],["code":"BYR","name":"Belarusian Ruble"],["code":"BZD","name":"Belize Dollar"],["code":"CAD","name":"Canadian Dollar"],["code":"CDF","name":"Congolese Franc"],["code":"CHE","name":"WIR Euro"],["code":"CHF","name":"Swiss Franc"],["code":"CHW","name":"WIR Franc"],["code":"CLE","name":"Chilean Escudo"],["code":"CLF","name":"Chilean Unit of Account (UF)"],["code":"CLP","name":"Chilean Peso"],["code":"CNX","name":"Chinese People's Bank Dollar"],["code":"CNY","name":"Chinese Yuan"],["code":"COP","name":"Colombian Peso"],["code":"COU","name":"Colombian Real Value Unit"],["code":"CRC","name":"Costa Rican Colón"],["code":"CSD","name":"Serbian Dinar (2002-2006)"],["code":"CSK","name":"Czechoslovak Hard Koruna"],["code":"CUC","name":"Cuban Convertible Peso"],["code":"CUP","name":"Cuban Peso"],["code":"CVE","name":"Cape Verdean Escudo"],["code":"CYP","name":"Cypriot Pound"],["code":"CZK","name":"Czech Republic Koruna"],["code":"DDM","name":"East German Mark"],["code":"DEM","name":"German Mark"],["code":"DJF","name":"Djiboutian Franc"],["code":"DKK","name":"Danish Krone"],["code":"DOP","name":"Dominican Peso"],["code":"DZD","name":"Algerian Dinar"],["code":"ECS","name":"Ecuadorian Sucre"],["code":"ECV","name":"Ecuadorian Unit of Constant Value"],["code":"EEK","name":"Estonian Kroon"],["code":"EGP","name":"Egyptian Pound"],["code":"EQE","name":"(null)"],["code":"ERN","name":"Eritrean Nakfa"],["code":"ESA","name":"Spanish Peseta (A account)"],["code":"ESB","name":"Spanish Peseta (convertible account)"],["code":"ESP","name":"Spanish Peseta"],["code":"ETB","name":"Ethiopian Birr"],["code":"EUR","name":"Euro"],["code":"FIM","name":"Finnish Markka"],["code":"FJD","name":"Fijian Dollar"],["code":"FKP","name":"Falkland Islands Pound"],["code":"FRF","name":"French Franc"],["code":"GBP","name":"British Pound Sterling"],["code":"GEK","name":"Georgian Kupon Larit"],["code":"GEL","name":"Georgian Lari"],["code":"GHC","name":"Ghanaian Cedi (1979-2007)"],["code":"GHS","name":"Ghanaian Cedi"],["code":"GIP","name":"Gibraltar Pound"],["code":"GMD","name":"Gambian Dalasi"],["code":"GNF","name":"Guinean Franc"],["code":"GNS","name":"Guinean Syli"],["code":"GQE","name":"Equatorial Guinean Ekwele"],["code":"GRD","name":"Greek Drachma"],["code":"GTQ","name":"Guatemalan Quetzal"],["code":"GWE","name":"Portuguese Guinea Escudo"],["code":"GWP","name":"Guinea-Bissau Peso"],["code":"GYD","name":"Guyanaese Dollar"],["code":"HKD","name":"Hong Kong Dollar"],["code":"HNL","name":"Honduran Lempira"],["code":"HRD","name":"Croatian Dinar"],["code":"HRK","name":"Croatian Kuna"],["code":"HTG","name":"Haitian Gourde"],["code":"HUF","name":"Hungarian Forint"],["code":"IDR","name":"Indonesian Rupiah"],["code":"IEP","name":"Irish Pound"],["code":"ILP","name":"Israeli Pound"],["code":"ILR","name":"Israeli Sheqel (1980-1985)"],["code":"ILS","name":"Israeli New Sheqel"],["code":"INR","name":"Indian Rupee"],["code":"IQD","name":"Iraqi Dinar"],["code":"IRR","name":"Iranian Rial"],["code":"ISJ","name":"Icelandic Króna (1918-1981)"],["code":"ISK","name":"Icelandic Króna"],["code":"ITL","name":"Italian Lira"],["code":"JMD","name":"Jamaican Dollar"],["code":"JOD","name":"Jordanian Dinar"],["code":"JPY","name":"Japanese Yen"],["code":"KES","name":"Kenyan Shilling"],["code":"KGS","name":"Kyrgystani Som"],["code":"KHR","name":"Cambodian Riel"],["code":"KMF","name":"Comorian Franc"],["code":"KPW","name":"North Korean Won"],["code":"KRH","name":"South Korean Hwan (1953-1962)"],["code":"KRO","name":"South Korean Won (1945-1953)"],["code":"KRW","name":"South Korean Won"],["code":"KWD","name":"Kuwaiti Dinar"],["code":"KYD","name":"Cayman Islands Dollar"],["code":"KZT","name":"Kazakhstani Tenge"],["code":"LAK","name":"Laotian Kip"],["code":"LBP","name":"Lebanese Pound"],["code":"LKR","name":"Sri Lankan Rupee"],["code":"LRD","name":"Liberian Dollar"],["code":"LSL","name":"Lesotho Loti"],["code":"LSM","name":"(null)"],["code":"LTL","name":"Lithuanian Litas"],["code":"LTT","name":"Lithuanian Talonas"],["code":"LUC","name":"Luxembourgian Convertible Franc"],["code":"LUF","name":"Luxembourgian Franc"],["code":"LUL","name":"Luxembourg Financial Franc"],["code":"LVL","name":"Latvian Lats"],["code":"LVR","name":"Latvian Ruble"],["code":"LYD","name":"Libyan Dinar"],["code":"MAD","name":"Moroccan Dirham"],["code":"MAF","name":"Moroccan Franc"],["code":"MCF","name":"Monegasque Franc"],["code":"MDC","name":"Moldovan Cupon"],["code":"MDL","name":"Moldovan Leu"],["code":"MGA","name":"Malagasy Ariary"],["code":"MGF","name":"Malagasy Franc"],["code":"MKD","name":"Macedonian Denar"],["code":"MKN","name":"Macedonian Denar (1992-1993)"],["code":"MLF","name":"Malian Franc"],["code":"MMK","name":"Myanma Kyat"],["code":"MNT","name":"Mongolian Tugrik"],["code":"MOP","name":"Macanese Pataca"],["code":"MRO","name":"Mauritanian Ouguiya"],["code":"MTL","name":"Maltese Lira"],["code":"MTP","name":"Maltese Pound"],["code":"MUR","name":"Mauritian Rupee"],["code":"MVP","name":"Maldivian Rupee"],["code":"MVR","name":"Maldivian Rufiyaa"],["code":"MWK","name":"Malawian Kwacha"],["code":"MXN","name":"Mexican Peso"],["code":"MXP","name":"Mexican Silver Peso (1861-1992)"],["code":"MXV","name":"Mexican Investment Unit"],["code":"MYR","name":"Malaysian Ringgit"],["code":"MZE","name":"Mozambican Escudo"],["code":"MZM","name":"Mozambican Metical (1980-2006)"],["code":"MZN","name":"Mozambican Metical"],["code":"NAD","name":"Namibian Dollar"],["code":"NGN","name":"Nigerian Naira"],["code":"NIC","name":"Nicaraguan Córdoba (1988-1991)"],["code":"NIO","name":"Nicaraguan Córdoba"],["code":"NLG","name":"Dutch Guilder"],["code":"NOK","name":"Norwegian Krone"],["code":"NPR","name":"Nepalese Rupee"],["code":"NZD","name":"New Zealand Dollar"],["code":"OMR","name":"Omani Rial"],["code":"PAB","name":"Panamanian Balboa"],["code":"PEI","name":"Peruvian Inti"],["code":"PEN","name":"Peruvian Nuevo Sol"],["code":"PES","name":"Peruvian Sol (1863-1965)"],["code":"PGK","name":"Papua New Guinean Kina"],["code":"PHP","name":"Philippine Peso"],["code":"PKR","name":"Pakistani Rupee"],["code":"PLN","name":"Polish Zloty"],["code":"PLZ","name":"Polish Zloty (1950-1995)"],["code":"PTE","name":"Portuguese Escudo"],["code":"PYG","name":"Paraguayan Guarani"],["code":"QAR","name":"Qatari Rial"],["code":"RHD","name":"Rhodesian Dollar"],["code":"ROL","name":"Romanian Leu (1952-2006)"],["code":"RON","name":"Romanian Leu"],["code":"RSD","name":"Serbian Dinar"],["code":"RUB","name":"Russian Ruble"],["code":"RUR","name":"Russian Ruble (1991-1998)"],["code":"RWF","name":"Rwandan Franc"],["code":"SAR","name":"Saudi Riyal"],["code":"SBD","name":"Solomon Islands Dollar"],["code":"SCR","name":"Seychellois Rupee"],["code":"SDD","name":"Sudanese Dinar (1992-2007)"],["code":"SDG","name":"Sudanese Pound"],["code":"SDP","name":"Sudanese Pound (1957-1998)"],["code":"SEK","name":"Swedish Krona"],["code":"SGD","name":"Singapore Dollar"],["code":"SHP","name":"Saint Helena Pound"],["code":"SIT","name":"Slovenian Tolar"],["code":"SKK","name":"Slovak Koruna"],["code":"SLL","name":"Sierra Leonean Leone"],["code":"SOS","name":"Somali Shilling"],["code":"SRD","name":"Surinamese Dollar"],["code":"SRG","name":"Surinamese Guilder"],["code":"STD","name":"São Tomé and Príncipe Dobra"],["code":"SUR","name":"Soviet Rouble"],["code":"SVC","name":"Salvadoran Colón"],["code":"SYP","name":"Syrian Pound"],["code":"SZL","name":"Swazi Lilangeni"],["code":"THB","name":"Thai Baht"],["code":"TJR","name":"Tajikistani Ruble"],["code":"TJS","name":"Tajikistani Somoni"],["code":"TMM","name":"Turkmenistani Manat (1993-2009)"],["code":"TMT","name":"Turkmenistani Manat"],["code":"TND","name":"Tunisian Dinar"],["code":"TOP","name":"Tongan Paʻanga"],["code":"TPE","name":"Timorese Escudo"],["code":"TRL","name":"Turkish Lira (1922-2005)"],["code":"TRY","name":"Turkish Lira"],["code":"TTD","name":"Trinidad and Tobago Dollar"],["code":"TWD","name":"New Taiwan Dollar"],["code":"TZS","name":"Tanzanian Shilling"],["code":"UAH","name":"Ukrainian Hryvnia"],["code":"UAK","name":"Ukrainian Karbovanets"],["code":"UGS","name":"Ugandan Shilling (1966-1987)"],["code":"UGX","name":"Ugandan Shilling"],["code":"USD","name":"US Dollar"],["code":"USN","name":"US Dollar (Next day)"],["code":"USS","name":"US Dollar (Same day)"],["code":"UYI","name":"Uruguayan Peso (Indexed Units)"],["code":"UYP","name":"Uruguayan Peso (1975-1993)"],["code":"UYU","name":"Uruguayan Peso"],["code":"UZS","name":"Uzbekistan Som"],["code":"VEB","name":"Venezuelan Bolívar (1871-2008)"],["code":"VEF","name":"Venezuelan Bolívar"],["code":"VND","name":"Vietnamese Dong"],["code":"VNN","name":"Vietnamese Dong (1978-1985)"],["code":"VUV","name":"Vanuatu Vatu"],["code":"WST","name":"Samoan Tala"],["code":"XAF","name":"CFA Franc BEAC"],["code":"XAG","name":"Silver"],["code":"XAU","name":"Gold"],["code":"XBA","name":"European Composite Unit"],["code":"XBB","name":"European Monetary Unit"],["code":"XBC","name":"European Unit of Account (XBC)"],["code":"XBD","name":"European Unit of Account (XBD)"],["code":"XCD","name":"East Caribbean Dollar"],["code":"XDR","name":"Special Drawing Rights"],["code":"XEU","name":"European Currency Unit"],["code":"XFO","name":"French Gold Franc"],["code":"XFU","name":"French UIC-Franc"],["code":"XOF","name":"CFA Franc BCEAO"],["code":"XPD","name":"Palladium"],["code":"XPF","name":"CFP Franc"],["code":"XPT","name":"Platinum"],["code":"XRE","name":"RINET Funds"],["code":"YDD","name":"Yemeni Dinar"],["code":"YER","name":"Yemeni Rial"],["code":"YUD","name":"Yugoslavian Hard Dinar (1966-1990)"],["code":"YUM","name":"Yugoslavian New Dinar (1994-2002)"],["code":"YUN","name":"Yugoslavian Convertible Dinar (1990-1992)"],["code":"YUR","name":"Yugoslavian Reformed Dinar (1992-1993)"],["code":"ZAL","name":"South African Rand (financial)"],["code":"ZAR","name":"South African Rand"],["code":"ZMK","name":"Zambian Kwacha"],["code":"ZRN","name":"Zairean New Zaire (1993-1998)"],["code":"ZRZ","name":"Zairean Zaire (1971-1993)"],["code":"ZWL","name":"Zimbabwean Dollar (2009)"],["code":"ZWR","name":"Zimbabwean Dollar (2008)"],["code":"ZWD","name":"Zimbabwean Dollar (1980-2008)"]]
    
    var searchDropDownItems: [[String:String]] = [] {
        didSet {
            self.tableViewDropDownOptions.reloadData()
        }
    }
    
    @IBOutlet weak var buttonClearSearch: UIButton!
    @IBOutlet weak var textFieldSearch: PaddingTextField!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        self.initializeUIComponents()
        // Do any additional setup after loading the view.
    }
    
    @IBAction func dismissDropDownButtonTouched(_ sender: UIButton) {
        self.dismiss(animated: true, completion: nil)
    }
    
    @IBAction func clearSearchButtonClicked(_ sender: Any) {
        self.textFieldSearch.text = Strings.empty
        self.buttonClearSearch.isHidden = true
        self.searchCurrencyUsingText(text: Strings.empty)
    }

    @IBAction func doneButtonTouched(_ sender: UIButton) {
        self.dismiss(animated: true) {
            if let item = self.itemSelectionDropDown?["code"] {
                self.sendSelectedOption(item)
            }
        }
    }
    
    /*
    // MARK: - Navigation

    // In a storyboard-based application, you will often want to do a little preparation before navigation
    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        // Get the new view controller using segue.destination.
        // Pass the selected object to the new view controller.
    }
    */

}
